import { children, useReducer } from "react";
import { GithubContext } from "context/github/githubContext"
import { GithubReducer } from "context/github/githubReducer"
import axios from "axios"
import { GIT_FIND } from "context/types";

export const GithubState = ({children}) => {

    const initialState = {users: []}
    const [state, dispatch] = useReducer(GithubReducer, initialState)

    const gitFind = async () => {
        console.log('!!!!!')
        const response = await axios.get('https://api.github.com/search/users?q=Alex')
        console.log(response)
        dispatch({type: GIT_FIND, payload: response.data.items})
    }


    
    const {users} = state
    return(
        <GithubContext.Provider value={{gitFind, users}}>
            {children}
        </GithubContext.Provider>
    )
}


